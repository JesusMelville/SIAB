import{j as a,s as p}from"./chunk-DOVFX6CJ.js";import{H as i,K as s,P as n}from"./chunk-4M3DBIZX.js";var l=class o{constructor(t){this.http=t}apiUrl=`${p.apiUrl}/auth`;currentUserKey="currentUser";tokenKey="token";get token(){return localStorage.getItem(this.tokenKey)}get currentUserValue(){let t=localStorage.getItem(this.currentUserKey);return t?JSON.parse(t):null}login(t,r){return this.http.post(`${this.apiUrl}/login`,{email:t,password:r}).pipe(i(e=>{e.success&&e.data&&e.token&&(localStorage.setItem(this.tokenKey,e.token),localStorage.setItem(this.currentUserKey,JSON.stringify(e.data)))}))}register(t,r,e){return this.http.post(`${this.apiUrl}/register`,{nombre:t,email:r,password:e})}logout(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.currentUserKey)}isLoggedIn(){return!!this.token}static \u0275fac=function(r){return new(r||o)(n(a))};static \u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
