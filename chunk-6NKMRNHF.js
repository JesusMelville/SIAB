import{a as I}from"./chunk-V7G7N5YJ.js";import{a as O,b as m,c as R,d as F,g as k,i as T,j as N,o as q,q as z}from"./chunk-SPFTHE42.js";import{e as P,g as M,o as E,p as S,r as y}from"./chunk-DOVFX6CJ.js";import{$a as C,Aa as v,Fa as b,Ka as l,Ra as s,Ta as u,Va as n,Wa as i,Xa as p,Y as _,Z as x,ab as f,cb as d,eb as h,lb as w,va as r}from"./chunk-4M3DBIZX.js";import"./chunk-EQDQRRRY.js";var G=()=>["/login"];function L(e,a){e&1&&(n(0,"div"),d(1,"El nombre es requerido"),i())}function B(e,a){e&1&&(n(0,"div"),d(1,"El nombre debe tener al menos 3 caracteres"),i())}function V(e,a){if(e&1&&(n(0,"div",24),l(1,L,2,0,"div",20)(2,B,2,0,"div",20),i()),e&2){let o=f();r(),s("ngIf",o.f.nombre.errors.required),r(),s("ngIf",o.f.nombre.errors.minlength)}}function j(e,a){e&1&&(n(0,"div"),d(1,"El email es requerido"),i())}function A(e,a){e&1&&(n(0,"div"),d(1,"Email inv\xE1lido"),i())}function Y(e,a){if(e&1&&(n(0,"div",24),l(1,j,2,0,"div",20)(2,A,2,0,"div",20),i()),e&2){let o=f();r(),s("ngIf",o.f.email.errors.required),r(),s("ngIf",o.f.email.errors.email)}}function H(e,a){e&1&&(n(0,"div"),d(1,"La contrase\xF1a es requerida"),i())}function J(e,a){e&1&&(n(0,"div"),d(1,"M\xEDnimo 6 caracteres"),i())}function K(e,a){if(e&1&&(n(0,"div",24),l(1,H,2,0,"div",20)(2,J,2,0,"div",20),i()),e&2){let o=f();r(),s("ngIf",o.f.password.errors.required),r(),s("ngIf",o.f.password.errors.minlength)}}function Q(e,a){e&1&&(n(0,"div"),d(1,"Debes confirmar tu contrase\xF1a"),i())}function U(e,a){e&1&&(n(0,"div"),d(1,"Las contrase\xF1as no coinciden"),i())}function W(e,a){if(e&1&&(n(0,"div",24),l(1,Q,2,0,"div",20)(2,U,2,0,"div",20),i()),e&2){let o=f();r(),s("ngIf",o.f.confirmPassword.errors.required),r(),s("ngIf",o.f.confirmPassword.errors.passwordMismatch)}}function X(e,a){if(e&1&&(n(0,"div",25),d(1),i()),e&2){let o=f();r(),h(" ",o.error," ")}}function Z(e,a){e&1&&(n(0,"span"),d(1,"Registrarse"),i())}function $(e,a){e&1&&p(0,"span",26)}var D=class e{constructor(a,o,t){this.fb=a;this.authService=o;this.router=t}registerForm;submitted=!1;loading=!1;error="";ngOnInit(){this.registerForm=this.fb.group({nombre:["",[m.required,m.minLength(3)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]]},{validators:this.passwordsIguales("password","confirmPassword")})}get f(){return this.registerForm.controls}passwordsIguales(a,o){return t=>{let g=t.get(a),c=t.get(o);return!g||!c||c.errors&&!c.errors.passwordMismatch||(g.value!==c.value?c.setErrors({passwordMismatch:!0}):c.setErrors(null)),null}}onSubmit(){if(this.submitted=!0,this.registerForm.invalid)return;this.loading=!0,this.error="";let{nombre:a,email:o,password:t}=this.registerForm.getRawValue();this.authService.register(a,o,t).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/login"])},error:g=>{this.loading=!1,this.error=g?.error?.message||"No se pudo registrar"}})}static \u0275fac=function(o){return new(o||e)(v(q),v(I),v(E))};static \u0275cmp=b({type:e,selectors:[["app-register"]],decls:40,vars:19,consts:[[1,"register-container"],[1,"register-card"],[1,"register-header"],[1,"logo-circle"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["id","nombre","type","text","formControlName","nombre","placeholder","Juan P\xE9rez Garc\xEDa",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","email"],["id","email","type","email","formControlName","email","placeholder","usuario@universidad.edu.pe",1,"form-control"],["for","password"],["id","password","type","password","formControlName","password","placeholder","M\xEDnimo 6 caracteres",1,"form-control"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn-register",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"login-link"],[3,"routerLink"],[1,"invalid-feedback"],[1,"alert","alert-danger"],[1,"spinner"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(),n(4,"svg",4),p(5,"path",5)(6,"path",6),i()(),x(),n(7,"h1"),d(8,"Crear Cuenta"),i(),n(9,"p"),d(10,"Sistema Bibliom\xE9trico"),i()(),n(11,"form",7),C("ngSubmit",function(){return t.onSubmit()}),n(12,"div",8)(13,"label",9),d(14,"Nombre Completo"),i(),p(15,"input",10),l(16,V,3,2,"div",11),i(),n(17,"div",8)(18,"label",12),d(19,"Email"),i(),p(20,"input",13),l(21,Y,3,2,"div",11),i(),n(22,"div",8)(23,"label",14),d(24,"Contrase\xF1a"),i(),p(25,"input",15),l(26,K,3,2,"div",11),i(),n(27,"div",8)(28,"label",16),d(29,"Confirmar Contrase\xF1a"),i(),p(30,"input",17),l(31,W,3,2,"div",11),i(),l(32,X,2,1,"div",18),n(33,"button",19),l(34,Z,2,0,"span",20)(35,$,1,0,"span",21),i(),n(36,"div",22),d(37," \xBFYa tienes cuenta? "),n(38,"a",23),d(39,"Inicia sesi\xF3n"),i()()()()()),o&2&&(r(11),s("formGroup",t.registerForm),r(4),u("is-invalid",t.submitted&&t.f.nombre.errors),r(),s("ngIf",t.submitted&&t.f.nombre.errors),r(4),u("is-invalid",t.submitted&&t.f.email.errors),r(),s("ngIf",t.submitted&&t.f.email.errors),r(4),u("is-invalid",t.submitted&&t.f.password.errors),r(),s("ngIf",t.submitted&&t.f.password.errors),r(4),u("is-invalid",t.submitted&&t.f.confirmPassword.errors),r(),s("ngIf",t.submitted&&t.f.confirmPassword.errors),r(),s("ngIf",t.error),r(),s("disabled",t.loading),r(),s("ngIf",!t.loading),r(),s("ngIf",t.loading),r(3),s("routerLink",w(18,G)))},dependencies:[M,P,z,k,O,R,F,T,N,y,S],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);font-family:Inter,sans-serif;padding:20px}.register-card[_ngcontent-%COMP%]{background:#fff;padding:40px 36px;border-radius:16px;box-shadow:0 8px 24px #0000001a;width:100%;max-width:420px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .6s ease}.register-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#2d3748;margin-bottom:4px}.register-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#4a5568;margin-bottom:20px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left}label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#4a5568;margin-bottom:6px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:12px 14px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;outline:none;transition:border-color .2s,box-shadow .2s}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea33}.is-invalid[_ngcontent-%COMP%]{border-color:#e53e3e!important;background:#fff5f5}.invalid-feedback[_ngcontent-%COMP%]{color:#e53e3e;font-size:13px;margin-top:4px;transition:opacity .2s}.error-message[_ngcontent-%COMP%]{background:#ffe6e6;color:#c53030;border-radius:8px;padding:10px 12px;font-size:14px;text-align:center;font-weight:500}button[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;border-radius:8px;font-weight:600;font-size:15px;cursor:pointer;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;transition:all .3s}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:12px;font-size:14px;color:#4a5568}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;text-decoration:none;transition:color .2s}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#764ba2}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:2px solid #fff;border-top:2px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .7s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{D as RegisterComponent};
